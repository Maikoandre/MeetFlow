{% extends 'base.html' %}
{% load static %}

{% block title %}Eventos - MeetFlow{% endblock %}

{% block content %}
<div class="page-header">
    <h3 class="page-title"> Calendário de Eventos </h3>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Inicio</a></li>
            <li class="breadcrumb-item active" aria-current="page">Eventos</li>
        </ol>
    </nav>
</div>

<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Eventos Disponíveis</h4>
                <p class="card-description"> Confira os próximos eventos e garanta sua vaga. </p>
                
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th> Evento </th>
                                <th> Data </th>
                                <th> Local </th>
                                <th class="text-center"> Ações </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for evento in eventos %}
                            <tr>
                                <td class="font-weight-medium"> {{ evento.titulo }} </td>
                                
                                <td> {{ evento.data|date:"d/m/Y" }} </td>
                                
                                <td> {{ evento.local }} </td>
                                <td class="text-center">
                                  {% if user.is_authenticated %}
                                    <a href="{% url 'inscrever_evento' evento.id %}" class="btn btn-outline-primary btn-sm btn-icon-text">
                                      <i class="icon-user-follow btn-icon-prepend"></i> Inscrever-se
                                    </a>
                                  {% else %}
                                    <a href="{% url 'login' %}?next={{ request.path }}" class="btn btn-outline-primary btn-sm btn-icon-text">
                                      <i class="icon-user-follow btn-icon-prepend"></i> Inscrever-se
                                    </a>
                                  {% endif %}
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="text-center text-muted">Nenhum evento encontrado no momento.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}